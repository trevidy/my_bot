colcon build --symlink-install

export LIBGL_ALWAYS_SOFTWARE=1

# Running rsp.launch.py (robot state publisher)
ros2 launch my_bot rsp.launch.py use_sim_time:=true

# Running gazebo
ros2 launch gazebo_ros gazebo.launch.py

# Spawning our robot in Gazebo
## Informs that the URDF is being published by robot state publisher on a topic called robot_description
ros2 run gazebo_ros spawn_entity.py -topic robot_description -entity bot_name

# Launching launch_sim.laumch.py (robot state publisher, gazebo, robot, world)
ros2 launch my_bot launch_sim.launch.py world:=./src/my_bot/worlds/obstacles.world

# keyboard control
ros2 run teleop_twist_keyboard teleop_twist_keyboard --ros-args -r /cmd_vel:=/diff_cont/cmd_vel_unstamped

# running rviz with saved world
rviz2 -d src/my_bot/config/view_bot.rviz

# running the SLAM toolbox
ros2 launch slam_toolbox online_async_launch.py slam_params_file:=./src/my_bot/config/mapper_params_online_async.yaml use_sim_time:=true

# runs the rosbridge server
ros2 run rosbridge_server rosbridge_websocket # if error, try to run rosbridge from source

# 1) launch gazebo (Gazebo boots up controller manager and checks description->ros2_control->gazebo tag)
ros2 launch my_bot launch_sim.launch.py world:=./src/my_bot/worlds/obstacles.world

# 2) launch joystick (teleop_twist_joy)
ros2 launch my_bot joystick.launch.py

# 3) launch rosbridge server
ros2 run rosbridge_server rosbridge_websocket --ros-args -p address:=0.0.0.0

# 4) launch the web page
npm start

# 5) use the controller

# forward motion debugging:
ros2 topic pub /joy sensor_msgs/msg/Joy "{
  axes: [0.0, 1.0, 0.0, 0.0],
  buttons: [0, 0, 0, 0]
}"

# resetting daemon
ros2 daemon stop
ros2 daemon start